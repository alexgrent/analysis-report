[<img src=https://user-images.githubusercontent.com/6883670/31999264-976dfb86-b98a-11e7-9432-0316345a72ea.png height=75 />](https://reactome.org)

Analysis Report
------
Exports results of an analysis performed in reactome.org to a PDF document. Click here to know more about [Analysis Service](https://reactome.org/dev/analysis).

The resulting PDF will contain the minimum information to reproduce the analysis, as well as  details for the most relevant pathways, sorted by p-value.

## Installation
Analysis exporter is developed as a Java library. To add it to your project, you have to use maven:

```
<dependencies>
	<dependency>
		<groupId>org.reactome.server.tools</groupId>
		<artifactId>analysis-exporter</artifactId>
		<version>1.0.0-SNAPSHOT</version>
	</dependency>
	<!-- ... -->
</dependencies>
<repositories>
	<repository>
		<id>pst-release</id>
		<name>EBI Nexus Repository</name>
		<url>http://www.ebi.ac.uk/Tools/maven/repos/content/repositories/pst-release</url>
	</repository>
	<!-- ... -->
<repositories>
```

## Usage
> This project needs a connection to the grap database (see [graph-core](https://github.com/reactome/graph-core)).

PDFs are generated by an instance of the __AnalysisExporter__ class.
``` java
// Configure Reactome graph database
ReactomeGraphCore.initialise("host", "port", "username", "password", Neo4jConfig.class);

AnalysisExporter exporter = new AnalysisExporter(
	DIAGRAM_PATH,    // layout (12345.json) and graph (12345.grap.json) files.
	EHLD_PATH,       // EHLD (R-HSA-123.svg) files
	FIREWORKS_PATH,  // Fireworks (Homo_sapiens.json) files
	ANALYSIS_PATH,   // Analysis (res_20210101_1.bin)
	SVG_SUMMARY);    // svgsummary.txt

OutputStream os = new FileOutputStream(new File("output.pdf"));

exporter.render(token, resource, 48887L, 25, "modern", "copper plus", "barium lithium", os);
```
The parameters of the *render* method are:

Name | Description
--- | ---
token / analysis | token of the analysis or an AnalysisSoredResult
resource | resource to filter results (default: TOTAL)
species | dbId of the species to filter results (default: 48887L)
maxPathways | max number of relevant pathways (default: 25)
diagramProfile | standard or modern (default: modern)
analysisProfile | standard, copper plus, strosobar (default: standard)
fireworksProfile | copper, copper plus, barium lithium or calcium salts (default: copper)

## Structure of the PDF

1. **Introduction**
2. **Properties of analysis**
    * Analysis type
    * Pathways found
    * Identifiers found
    * Projected to human
    * Include interactors
    * Pathways species
    * unique ID of the analysis
3. **Genome-wide overview**
4. **Most significant pathways table**
    * name
    * found entities
    * entities ratio
    * p-value and FDR
    * found reactions
    * reactions ratio
5. **Most significant pathways details**
    * diagram
    * diseases, compartments, inferences
    * summation
    * edit history
    * elements found
6. **Foud identifiers**
7. **Not foud identifiers**

## License
This module uses the [iText](https://itextpdf.com) library to create PDF document, so it naturally adopt the [![License](https://img.shields.io/badge/license-AGPL%203.0-blue.svg?style=plastic)](https://opensource.org/licenses/AGPL-3.0), 
you can use this module freely on condition that also comply with this license.
